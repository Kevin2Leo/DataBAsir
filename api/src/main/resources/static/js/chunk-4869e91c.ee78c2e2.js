(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4869e91c"],{"0742":function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("7a23"),a={key:0},o=Object(c["createTextVNode"])("同步"),r={key:1},l={key:2},i=Object(c["createTextVNode"])("同步"),u=Object(c["createTextVNode"])("导出"),d={class:"document-content"},b=["id"],s=["id"],j=Object(c["createElementVNode"])("h3",null,"Columns",-1),O={key:0},m=Object(c["createElementVNode"])("h3",null,"Indexes",-1),p={key:1},f=Object(c["createElementVNode"])("h3",null,"Triggers",-1),h={class:"toc-wrapper"},V={class:"toc"};function N(e,t,n,N,w,g){var C=Object(c["resolveComponent"])("el-button"),v=Object(c["resolveComponent"])("el-empty"),x=Object(c["resolveComponent"])("el-skeleton"),k=Object(c["resolveComponent"])("el-col"),D=Object(c["resolveComponent"])("el-option"),y=Object(c["resolveComponent"])("el-select"),_=Object(c["resolveComponent"])("el-row"),B=Object(c["resolveComponent"])("el-header"),E=Object(c["resolveComponent"])("el-descriptions-item"),T=Object(c["resolveComponent"])("el-descriptions"),I=Object(c["resolveComponent"])("el-table-column"),P=Object(c["resolveComponent"])("el-table"),S=Object(c["resolveComponent"])("el-link"),R=Object(c["resolveComponent"])("el-backtop"),F=Object(c["resolveComponent"])("el-tooltip"),z=Object(c["resolveComponent"])("el-main"),M=Object(c["resolveComponent"])("el-container"),U=Object(c["resolveDirective"])("loading"),A=Object(c["resolveDirective"])("require-roles"),L=Object(c["resolveDirective"])("select-more");return N.isShowNoDataPage?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createVNode"])(v,{description:"似乎还没有同步过文档"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(C,{type:"primary",icon:"refresh",round:"",size:"large",onClick:N.onSyncProjectDocument,loading:N.state.loadings.handleSync},{default:Object(c["withCtx"])((function(){return[o]})),_:1},8,["onClick","loading"])]})),_:1})])):N.isShowLoadingPage?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",r,[Object(c["withDirectives"])(Object(c["createVNode"])(x,{rows:12},null,512),[[U,!N.state.init]])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",l,[Object(c["createVNode"])(M,{class:"document-container"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(B,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(_,{gutter:20},{default:Object(c["withCtx"])((function(){return[Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createBlock"])(k,{span:2},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(C,{type:"success",style:{width:"100%"},icon:"Refresh",onClick:N.onSyncProjectDocument,loading:N.state.loadings.handleSync},{default:Object(c["withCtx"])((function(){return[i]})),_:1},8,["onClick","loading"])]})),_:1})),[[A,["SYS_OWNER","GROUP_OWNER?groupId="+N.state.groupId,"GROUP_MEMBER?groupId="+N.state.groupId]]]),Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createBlock"])(k,{span:2},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(C,{type:"primary",style:{width:"100%"},icon:"Download"},{default:Object(c["withCtx"])((function(){return[u]})),_:1})]})),_:1})),[[A,["SYS_OWNER","GROUP_OWNER?groupId="+N.state.groupId,"GROUP_MEMBER?groupId="+N.state.groupId]]]),Object(c["createVNode"])(k,{span:4},{default:Object(c["withCtx"])((function(){return[Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createBlock"])(y,{onChange:N.onProjectDocumentVersionChange,modelValue:N.state.databaseDocumentFilter.version,"onUpdate:modelValue":t[0]||(t[0]=function(e){return N.state.databaseDocumentFilter.version=e}),placeholder:"历史版本",clearable:""},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(N.state.databaseDocumentVersions,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(D,{key:e.version,label:"["+e.createAt+"]->"+e.version,value:e.version},null,8,["label","value"])})),128))]})),_:1},8,["onChange","modelValue"])),[[L,N.loadMoreDocumentVersions],[U,N.state.loadings.loadingVersions]])]})),_:1})]})),_:1})]})),_:1}),Object(c["createVNode"])(z,{class:"document-content-wrapper"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(_,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(k,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(T,{column:1,size:"large",border:""},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(E,{label:"Database Name","label-align":"left",width:"200px"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(N.state.databaseDocument.databaseName),1)]})),_:1}),Object(c["createVNode"])(E,{label:"Product Name","label-align":"left"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(N.state.databaseDocument.productName),1)]})),_:1}),Object(c["createVNode"])(E,{label:"Product Version","label-align":"left"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(N.state.databaseDocument.productVersion),1)]})),_:1}),Object(c["createVNode"])(E,{label:"Document Version","label-align":"left"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(N.state.databaseDocument.documentVersion),1)]})),_:1}),Object(c["createVNode"])(E,{label:"Create At","label-align":"left"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(N.state.databaseDocument.createAt),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(c["createVNode"])(_,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(k,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("h2",{id:N.state.databaseDocument.databaseName+".overview"},"Overview",8,b)]})),_:1})]})),_:1}),Object(c["createVNode"])(_,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(k,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(P,{data:N.state.databaseDocument.tables,border:"",width:"80%"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(I,{type:"index"}),Object(c["createVNode"])(I,{prop:"name",label:"Name","min-width":"160",resizable:""}),Object(c["createVNode"])(I,{prop:"type",label:"Type",width:"200",resizable:""}),Object(c["createVNode"])(I,{prop:"comment",label:"comment","min-width":"160",resizable:""})]})),_:1},8,["data"])]})),_:1})]})),_:1}),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(N.state.databaseDocument.tables,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:e},[Object(c["createVNode"])(_,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(k,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("h2",{id:N.state.databaseDocument.databaseName+"."+e.name},Object(c["toDisplayString"])(e.name),9,s)]})),_:2},1024)]})),_:2},1024),Object(c["createVNode"])(_,null,{default:Object(c["withCtx"])((function(){return[e.columns.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(k,{key:0},{default:Object(c["withCtx"])((function(){return[j]})),_:1})):Object(c["createCommentVNode"])("",!0)]})),_:2},1024),Object(c["createVNode"])(_,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(k,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(P,{data:e.columns,border:"",fit:"",width:"80%"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(I,{type:"index"}),Object(c["createVNode"])(I,{prop:"name",label:"Name","min-width":"120"}),Object(c["createVNode"])(I,{prop:"type",formatter:N.columnTypeFormat,label:"Type",width:"140"},null,8,["formatter"]),Object(c["createVNode"])(I,{prop:"nullable",label:"Is Nullable",width:"120"}),Object(c["createVNode"])(I,{prop:"autoIncrement",label:"Auto increment",width:"140"}),Object(c["createVNode"])(I,{prop:"defaultValue",label:"default","min-width":"120"}),Object(c["createVNode"])(I,{prop:"comment",label:"comment"})]})),_:2},1032,["data"])]})),_:2},1024)]})),_:2},1024),e.indexes.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",O,[Object(c["createVNode"])(_,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(k,null,{default:Object(c["withCtx"])((function(){return[m]})),_:1})]})),_:1}),Object(c["createVNode"])(_,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(k,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(P,{data:e.indexes,border:"",fit:"",width:"80%"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(I,{type:"index"}),Object(c["createVNode"])(I,{prop:"name",label:"Name","min-width":"120"}),Object(c["createVNode"])(I,{prop:"isPrimary",label:"IsPrimary",width:"120"}),Object(c["createVNode"])(I,{prop:"isUnique",label:"Is Unique",width:"120"}),Object(c["createVNode"])(I,{prop:"columnNames",label:"Columns","min-width":"150"})]})),_:2},1032,["data"])]})),_:2},1024)]})),_:2},1024)])):Object(c["createCommentVNode"])("",!0),e.triggers.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",p,[Object(c["createVNode"])(_,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(k,null,{default:Object(c["withCtx"])((function(){return[f]})),_:1})]})),_:1}),Object(c["createVNode"])(_,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(k,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(P,{data:e.triggers,fit:"",border:"",width:"80%"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(I,{type:"index"}),Object(c["createVNode"])(I,{prop:"name",label:"Name","min-width":"120"}),Object(c["createVNode"])(I,{prop:"timing",label:"timing"}),Object(c["createVNode"])(I,{prop:"manipulation",label:"manipulation",width:"120"}),Object(c["createVNode"])(I,{prop:"statement",label:"statement"}),Object(c["createVNode"])(I,{prop:"creatAt",label:"creatAt",width:"150"})]})),_:2},1032,["data"])]})),_:2},1024)]})),_:2},1024)])):Object(c["createCommentVNode"])("",!0)],64)})),128))]),Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("ul",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(N.state.toc,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},[Object(c["createVNode"])(S,{underline:!1,onClick:function(t){return N.onClickToc(N.state.databaseDocument.databaseName+"."+e.name)}},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.name),1)]})),_:2},1032,["onClick"]),Object(c["createElementVNode"])("ul",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.child,(function(e,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t+"-"+n},[Object(c["createVNode"])(S,{underline:!1},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.name),1)]})),_:2},1024)])})),128))])])})),128))])])]),Object(c["createVNode"])(F,{content:"回到顶部",placement:"top"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(R,{bottom:100})]})),_:1})]})),_:1})]})),_:1})]))}var w=n("1da1"),g=(n("d3b7"),n("159b"),n("96cf"),n("6c02")),C=n("1c1e"),v="/api/v1.0",x=function(e,t){return C["a"].get(v+"/projects/"+e+"/documents",{params:t})},k=function(e){return C["a"].post(v+"/projects/"+e+"/documents")},D=function(e,t){return C["a"].get(v+"/projects/"+e+"/document_versions",{params:t})},y=n("3ef4"),_={setup:function(){var e=Object(g["c"])(),t=Object(c["reactive"])({databaseDocumentVersionFilter:{page:0,size:10},databaseDocumentVersions:[],databaseDocumentVersionTotalPages:0,databaseDocumentFilter:{version:null},databaseDocument:null,toc:[],init:!1,loadings:{handleSync:!1,loadingVersions:!1},projectId:null,groupId:null});t.projectId=e.params.projectId,t.groupId=e.params.groupId;var n=Object(c["computed"])((function(){return!t.databaseDocument&&t.init})),a=Object(c["computed"])((function(){return!t.databaseDocument&&!t.init})),o=function(e,t){Object(y["a"])({showClose:!0,message:t,type:e,duration:3e3})},r=function(){var n=Object(w["a"])(regeneratorRuntime.mark((function n(){var c,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,D(e.params.projectId);case 2:return c=n.sent,t.databaseDocumentVersions=c.data.content,t.databaseDocumentVersionTotalPages=c.data.totalPages,n.next=7,x(e.params.projectId);case 7:a=n.sent,a.errCode?o("error","同步失败："+a.errMessage):a.data?(t.databaseDocument=a.data,l(a.data)):o("warn","无可用数据"),t.init=!0;case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),l=function(e){t.toc.push({name:"overview",child:[]}),e.tables.forEach((function(e){var n=[];t.toc.push({name:e.name,child:n})}))},i=function(e){var t=document.getElementById(e);if(t){var n=-100,c=t.offsetTop,a=t.offsetParent;while(null!==a)c+=a.offsetTop,a=a.offsetParent;window.scrollTo({top:c+n,behavior:"smooth"})}},u=function(e){return null==e.decimalDigits?e.type+"("+e.size+")":e.type+"("+e.size+", "+e.decimalDigits+")"},d=function(){var n=Object(w["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,x(e.params.projectId,t.databaseDocumentFilter);case 2:c=n.sent,c.data?(t.databaseDocument=c.data,o("success","切换成功")):o("warn","无可用数据");case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),b=function(){var n=e.params.projectId;t.loadings.handleSync=!0,k(n).then((function(e){e.errCode||(r(),o("success","同步成功")),t.loadings.handleSync=!1})).catch((function(){return t.loadings.handleSync=!1}))},s=j(Object(w["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.loadings.loadingVersions=!0,!(t.databaseDocumentVersionFilter.page+1<t.databaseDocumentVersionTotalPages)){n.next=8;break}return t.databaseDocumentVersionFilter.page++,n.next=5,D(e.params.projectId,t.databaseDocumentVersionFilter);case 5:c=n.sent,t.databaseDocumentVersionTotalPages=c.data.totalPages,c.data.content.length>0&&c.data.content.forEach((function(e){return t.databaseDocumentVersions.push(e)}));case 8:t.loadings.loadingVersions=!1;case 9:case"end":return n.stop()}}),n)}))),800);function j(e,t){var n=null;return function(){var c=this,a=arguments;n&&clearTimeout(n),n=setTimeout((function(){e.apply(c,a)}),t)}}return r(),{state:t,isShowNoDataPage:n,isShowLoadingPage:a,onClickToc:i,columnTypeFormat:u,loadMoreDocumentVersions:s,onProjectDocumentVersionChange:d,onSyncProjectDocument:b}}},B=(n("38c5"),n("6b0d")),E=n.n(B);const T=E()(_,[["render",N]]);t["default"]=T},"1b31":function(e,t,n){},"38c5":function(e,t,n){"use strict";n("1b31")}}]);
//# sourceMappingURL=chunk-4869e91c.ee78c2e2.js.map